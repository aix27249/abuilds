# ABUILD generated by mkpkg_generator.sh

pkgname=network-scripts
pkgver=14.0
pkgbuild=1
arch=("noarch")

shortdesc=("Scripts to configure a network")
longdesc=("Network configuration basics")

tags=("net-misc network")
build_deps="lftp"
source=("")

config_files="etc/rc.d/rc.inet1.conf
etc/rc.d/rc.ip_forward
etc/hosts
etc/hosts.deny
etc/hosts.equiv
etc/networks
etc/nntpserver
etc/resolv.conf
etc/host.conf
etc/hosts.allow
etc/protocols"

adddep="etc"


build() {
	# There will be blood...
	set -e
	mkdir -p ${srcdir}
	cd $srcdir
	echo mirror | lftp http://slackware.rol.ru/slackware/slackware-current/source/n/network-scripts

	mkdir -p ${pkgdir}/etc/rc.d
	( cd ${pkgdir}/etc/rc.d
		for file in rc.inet1.conf rc.inet1 rc.ip_forward ; do
			install -m0644 ${srcdir}/scripts/$file ${file}
		done
		chmod 755 rc.inet1
		chmod 600 rc.inet1.conf
	)
	( cd ${pkgdir}/etc
		for file in host.conf hosts.allow hosts.deny hosts.equiv hosts networks nntpserver protocols resolv.conf ; do
			install -m644 ${srcdir}/scripts/$file ${file}
		done
	)


	# Add manpages:
	mkdir -p ${pkgdir}/usr/man/man{5,8}
	cat ${srcdir}/manpages/rc.inet1.conf.5 | gzip -9c > ${pkgdir}/usr/man/man5/rc.inet1.conf.5.gz
	cat ${srcdir}/manpages/rc.inet1.8 | gzip -9c > ${pkgdir}/usr/man/man8/rc.inet1.8.gz
	set +e
}
