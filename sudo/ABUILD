# ABUILD generated by mkpkg_generator.sh

pkgname=sudo
pkgver=1.8.7
pkgbuild=1
arch=("auto")

shortdesc=("sudo (give limited root privileges to certain users)")
longdesc=("'sudo' is a command that allows users to execute some commands as root. The /etc/sudoers file (edited with 'visudo') specifies which users have access to sudo and which commands they can run. 'sudo' logs all its activities to /var/log/ so the system administrator can keep an eye on things.")

tags=("console sys-auth")

source=("http://www.sudo.ws/sudo/dist/$pkgname-$pkgver.tar.gz")

build_deps="glibc-solibs linux-pam libaudit"
config_files="etc/sudoers"

BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr \
	--libdir=/usr/lib$LIBDIRSUFFIX \
	--mandir=/usr/man \
	--sysconfdir=/etc \
	--libexecdir=/usr/lib${LIBDIRSUFFIX} \
	--docdir=/usr/doc/${pkgname}-${pkgver} \
	--disable-env-reset \
	--with-logfac=auth \
	--with-pam \
	--with-env-editor \
	--with-passprompt=\"[sudo] password for %p: \" \
	--with-all-insults"
INSTALL_KEYS="DESTDIR=$pkgdir"

after_build() {
	install -Dm0644 ${filedir}/sudo.pam ${pkgdir}/etc/pam.d/sudo
}
