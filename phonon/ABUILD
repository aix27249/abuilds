# ABUILD generated by mkpkg_generator.sh

pkgname=phonon
pkgver=4.7.2
pkgbuild=1
arch=('auto')

shortdesc=('phonon (multimedia framework for KDE4)')
longdesc=('Phonon is the multimedia framework for KDE4.')

tags=('libs media-sound')

source=("http://download.kde.org/stable/phonon/${pkgver}/${pkgname}-${pkgver}.tar.xz")

build_deps="cmake gcc gcc-g++"

BUILD_SYSTEM='cmake'
BUILD_KEYS="  -DCMAKE_BUILD_TYPE=Release \
  -DCMAKE_INSTALL_PREFIX=/usr \
  -DMAN_INSTALL_DIR=/usr/man \
  -DLIB_SUFFIX=${LIBDIRSUFFIX} \
  -DPHONON_QT_MKSPECS_INSTALL_DIR=/usr/share/qt/mkspecs/modules \
  -DPHONON_QT_PLUGIN_INSTALL_DIR=/usr/lib${LIBDIRSUFFIX}/qt/plugins/designer \
  -DWITH_PulseAudio=OFF \
  -DWITH_QZeitgeist=OFF \
  -DCMAKE_SKIP_RPATH=ON"
INSTALL_KEYS="DESTDIR=${pkgdir}"

after_build() {
  mkdir -p ${pkgdir}/usr/lib${LIBDIRSUFFIX}/qt/plugins
  ( cd ${pkgdir}/usr/lib${LIBDIRSUFFIX}/qt/plugins
       ln -s /usr/lib${LIBDIRSUFFIX}/kde4/plugins/phonon_backend .
  )
}

